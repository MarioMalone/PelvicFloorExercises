<!-- pages/stats/stats.wxml -->
<view class="container">
  <view class="header-banner">
    <view class="banner-title">å†å²ç»Ÿè®¡</view>
    <view class="banner-desc">æ¯ä¸€æ­¥åšæŒéƒ½åœ¨æ±‡èšæˆå¥åº·çš„ä½ </view>
  </view>

  <view class="summary-grid">
    <view class="grid-item card">
      <view class="label">åšæŒå¤©æ•°</view>
      <view class="value">{{summary.totalDays}}</view>
      <view class="unit">å¤©</view>
    </view>
    <view class="grid-item card">
      <view class="label">ç´¯è®¡æ—¶é•¿</view>
      <view class="value">{{summary.totalTime}}</view>
      <view class="unit">åˆ†é’Ÿ</view>
    </view>
    <view class="grid-item card">
      <view class="label">ç´¯è®¡å®Œæˆ</view>
      <view class="value">{{summary.totalRounds}}</view>
      <view class="unit">ç»„</view>
    </view>
  </view>

  <view class="section-title">æœ¬æœˆæ‰“å¡</view>
  <view class="card calendar-card">
    <view class="calendar-header">{{currentMonthName}}</view>
    <view class="calendar-weekdays">
      <view>æ—¥</view><view>ä¸€</view><view>äºŒ</view><view>ä¸‰</view><view>å››</view><view>äº”</view><view>å…­</view>
    </view>
    <view class="calendar-grid">
      <view wx:for="{{calendarDays}}" wx:key="index" class="calendar-day">
        <view class="day-number {{item.isCurrentDay ? 'today' : ''}}">{{item.day}}</view>
        <view class="training-dot {{item.hasTrained ? 'active' : ''}}" wx:if="{{item.day}}"></view>
      </view>
    </view>
  </view>

  <view class="section-title">è¿‘7æ—¥è¶‹åŠ¿ (è®­ç»ƒæŒ‡æ•°)</view>
  <view class="card chart-container">
    <view class="chart-main">
      <view wx:for="{{chartData}}" wx:key="date" class="chart-column">
        <view class="bar-wrapper">
          <view class="bar" style="height: {{item.height}}%">
            <view class="bar-value" wx:if="{{item.value > 0}}">{{item.value}}</view>
          </view>
        </view>
        <view class="bar-label">{{item.label}}</view>
      </view>
    </view>
  </view>

  <view class="section-title">æœ€è¿‘è®°å½•</view>
  
  <view class="history-list">
    <block wx:if="{{history.length > 0}}">
      <view wx:for="{{history}}" wx:key="timestamp" class="history-item card">
        <view class="item-left">
          <view class="item-date">{{item.date}}</view>
          <view class="item-info">{{item.rounds}}ç»„ Â· {{item.duration}}ç§’</view>
        </view>
        <view class="item-right">
          <view class="status-tag">å·²å®Œæˆ</view>
        </view>
      </view>
    </block>
    <view wx:else class="empty-state">
      <view class="empty-icon">ğŸ“Š</view>
      <view class="empty-text">æš‚æ— æ•°æ®ï¼Œå¼€å§‹ç¬¬ä¸€åœºè®­ç»ƒå§</view>
    </view>
  </view>
</view>